import{a as Z,b as q,_ as H}from"./TradesLogChart-BugI9k-Y.js";import{c as J}from"./TradeList-DRyRW5ZY.js";import{b as K,c as Q}from"./InfoBox.vue_vue_type_script_setup_true_lang-DuHi0co2.js";import{f as j,O as z,n as c,o as _,s as g,v as s,a as x,A as e,d as S,M as L,y,X as Y,c as N,Z as ee,W as te,ah as oe,b1 as ae,U as se,$ as re,r as ne,a1 as O,b2 as T,p as le,a3 as G,b as n,z as D}from"./index-y-IgYf6E.js";import{_ as ie,a as de}from"./PeriodBreakdown.vue_vue_type_script_setup_true_lang-DMoA2J7v.js";import"./BFormSelect.vue_vue_type_script_setup_true_lang-BigptVap-Dd8FLBDt.js";import"./installCanvasRenderer-BpNB3XR3.js";import"./chartZoom-B-0dVpED.js";import"./BFormRadioGroup.vue_vue_type_script_setup_true_lang-DnhMTKgS-BEjNSKcS.js";import"./event-a_bi5ysw-CCMJ8JbX.js";import"./install-CHnNIATs.js";const ue={class:"d-flex flex-row justify-content-between align-items-center"},ce={key:2},pe={key:0},fe=["title"],_e={class:"text-small"},me={key:0},ye={class:"text-profit"},be={class:"text-loss"},he=j({__name:"BotComparisonList",setup(A){const o=z(),b=c({get:()=>Object.values(o.botStores).every(l=>l.isSelected),set:l=>{for(const r in o.botStores)o.botStores[r].isSelected=l}}),$=[{key:"botName",label:"Bot"},{key:"trades",label:"Trades"},{key:"profitOpen",label:"Open Profit"},{key:"profitClosed",label:"Closed Profit"},{key:"balance",label:"Balance"},{key:"winVsLoss",label:"W/L"}],R=c(()=>{const l=[],r={botId:void 0,botName:"Summary",profitClosed:0,profitClosedRatio:void 0,profitOpen:0,profitOpenRatio:void 0,stakeCurrency:"USDT",wins:0,losses:0};return Object.entries(o.allProfit).forEach(([a,d])=>{var p,f,w,C,P,v,B,V;const m=o.allOpenTrades[a].reduce((u,i)=>u+i.stake_amount,0),h=o.allOpenTrades[a].reduce((u,i)=>u+(i.total_profit_ratio??i.profit_ratio)*i.stake_amount,0)/m,t=o.allOpenTrades[a].reduce((u,i)=>u+(i.total_profit_abs??i.profit_abs??0),0);l.push({botId:a,botName:o.availableBots[a].botName||o.availableBots[a].botId,trades:`${o.allOpenTradeCount[a]} / ${((p=o.allBotState[a])==null?void 0:p.max_open_trades)||"N/A"}`,profitClosed:d.profit_closed_coin,profitClosedRatio:d.profit_closed_ratio||0,stakeCurrency:((f=o.allBotState[a])==null?void 0:f.stake_currency)||"",profitOpenRatio:h,profitOpen:t,wins:d.winning_trades,losses:d.losing_trades,balance:((w=o.allBalance[a])==null?void 0:w.total_bot)??((C=o.allBalance[a])==null?void 0:C.total),stakeCurrencyDecimals:((P=o.allBotState[a])==null?void 0:P.stake_currency_decimals)||3,isDryRun:(v=o.allBotState[a])==null?void 0:v.dry_run,isOnline:(B=o.botStores[a])==null?void 0:B.isBotOnline}),d.profit_closed_coin!==void 0&&o.botStores[a].isSelected&&(r.profitClosed+=d.profit_closed_coin,r.profitOpen+=t,r.wins+=d.winning_trades,r.losses+=d.losing_trades,r.stakeCurrency=((V=o.allBotState[a])==null?void 0:V.stake_currency)||r.stakeCurrency)}),l.push(r),l});return(l,r)=>{const a=oe,d=ae,m=K,h=se;return _(),g(h,{ref:"tradesTable",small:"",hover:"","show-empty":"","primary-key":"botId",items:e(R),fields:$},{"cell(botName)":s(({item:t,value:p})=>[x("div",ue,[x("div",null,[t.botId&&e(o).botCount>1?(_(),g(a,{key:0,modelValue:e(o).botStores[t.botId??""].isSelected,"onUpdate:modelValue":f=>e(o).botStores[t.botId??""].isSelected=f,title:"Show this bot in Dashboard"},{default:s(()=>[S(L(p),1)]),_:2},1032,["modelValue","onUpdate:modelValue"])):y("",!0),!t.botId&&e(o).botCount>1?(_(),g(a,{key:1,modelValue:e(b),"onUpdate:modelValue":r[0]||(r[0]=f=>Y(b)?b.value=f:null),title:"Toggle all bots"},{default:s(()=>[S(L(p),1)]),_:2},1032,["modelValue"])):y("",!0),e(o).botCount<=1?(_(),N("span",ce,L(p),1)):y("",!0)]),t.isOnline&&t.isDryRun?(_(),g(d,{key:0,class:"align-items-center",variant:"success"},{default:s(()=>r[1]||(r[1]=[S("Dry")])),_:1})):y("",!0),t.isOnline&&!t.isDryRun?(_(),g(d,{key:1,class:"align-items-center",variant:"warning"},{default:s(()=>r[2]||(r[2]=[S("Live")])),_:1})):y("",!0),t.isOnline===!1?(_(),g(d,{key:2,class:"align-items-center",variant:"secondary"},{default:s(()=>r[3]||(r[3]=[S("Offline")])),_:1})):y("",!0)])]),"cell(profitOpen)":s(({item:t})=>[t.profitOpen&&t.botId!="Summary"?(_(),g(m,{key:0,"profit-ratio":t.profitOpenRatio,"profit-abs":t.profitOpen,"profit-desc":`Total Profit (Open and realized) ${("formatPercent"in l?l.formatPercent:e(ee))(t.profitOpenRatio??0)}`,"stake-currency":t.stakeCurrency},null,8,["profit-ratio","profit-abs","profit-desc","stake-currency"])):y("",!0)]),"cell(profitClosed)":s(({item:t})=>[t.profitClosed&&t.botId!="Summary"?(_(),g(m,{key:0,"profit-ratio":t.profitClosedRatio,"profit-abs":t.profitClosed,"stake-currency":t.stakeCurrency},null,8,["profit-ratio","profit-abs","stake-currency"])):y("",!0)]),"cell(balance)":s(({item:t})=>[t.balance?(_(),N("div",pe,[x("span",{title:t.stakeCurrency},L(("formatPrice"in l?l.formatPrice:e(te))(t.balance??0,t.stakeCurrencyDecimals)),9,fe),x("span",_e,L(` ${t.stakeCurrency}${t.isDryRun?" (dry)":""}`),1)])):y("",!0)]),"cell(winVsLoss)":s(({item:t})=>[t.losses!==void 0?(_(),N("div",me,[x("span",ye,L(t.wins),1),r[4]||(r[4]=S(" / ")),x("span",be,L(t.losses),1)])):y("",!0)]),_:1},8,["items"])}}}),ge={class:"d-flex justify-content-center"},we={class:"d-flex justify-content-center"},Pe=j({__name:"DashboardView",setup(A){const o=z(),b=re(),$=ne("");function R(v){$.value=v}const l=c(()=>["","sm","md","lg","xl"].includes($.value)),r=c(()=>b.layoutLocked||!l.value),a=c(()=>l.value?b.dashboardLayout:[...b.getDashboardLayoutSm]);function d(v){l.value&&(console.log("newlayout",v),console.log("saving dashboard"),b.dashboardLayout=v)}const m=c(()=>O(a.value,T.dailyChart)),h=c(()=>O(a.value,T.botComparison)),t=c(()=>O(a.value,T.allOpenTrades)),p=c(()=>O(a.value,T.allClosedTrades)),f=c(()=>O(a.value,T.cumChartChart)),w=c(()=>O(a.value,T.profitDistributionChart)),C=c(()=>O(a.value,T.tradesLogChart)),P=c(()=>({sm:b.getDashboardLayoutSm}));return le(async()=>{o.allGetDaily({timescale:30}),o.activeBot.getOpenTrades(),o.activeBot.getProfit()}),(v,B)=>{const V=ie,u=de,i=G("GridItem"),E=he,I=Q,U=J,F=Z,M=q,W=H,X=G("GridLayout");return _(),g(X,{class:"h-100 w-100",style:{padding:"1px"},"row-height":50,layout:e(a),"vertical-compact":!1,margin:[2,2],"responsive-layouts":e(P),"is-resizable":!e(r),"is-draggable":!e(r),responsive:!0,"prevent-collision":!0,cols:{lg:12,md:12,sm:12,xs:4,xxs:2},"col-num":12,onLayoutUpdated:d,"onUpdate:breakpoint":R},{default:s(({gridItemProps:k})=>[n(i,D(k,{i:e(m).i,x:e(m).x,y:e(m).y,w:e(m).w,h:e(m).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[n(u,{header:`Profit over time ${e(o).botCount>1?"combined":""}`},{default:s(()=>[n(V,{"multi-bot-view":""})]),_:1},8,["header"])]),_:2},1040,["i","x","y","w","h"]),n(i,D(k,{i:e(h).i,x:e(h).x,y:e(h).y,w:e(h).w,h:e(h).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[n(u,{header:"Bot comparison"},{default:s(()=>[n(E)]),_:1})]),_:2},1040,["i","x","y","w","h"]),n(i,D(k,{i:e(t).i,x:e(t).x,y:e(t).y,w:e(t).w,h:e(t).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[n(u,null,{header:s(()=>[x("div",ge,[B[0]||(B[0]=S(" Open Trades ")),n(I,{class:"ms-2",hint:"Open trades of all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:s(()=>[n(U,{"active-trades":"",trades:e(o).allOpenTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),n(i,D(k,{i:e(f).i,x:e(f).x,y:e(f).y,w:e(f).w,h:e(f).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[n(u,{header:"Cumulative Profit"},{default:s(()=>[n(F,{trades:e(o).allTradesSelectedBots,"open-trades":e(o).allOpenTradesSelectedBots,"show-title":!1},null,8,["trades","open-trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),n(i,D(k,{i:e(p).i,x:e(p).x,y:e(p).y,w:e(p).w,h:e(p).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[n(u,null,{header:s(()=>[x("div",we,[B[1]||(B[1]=S(" Closed Trades ")),n(I,{class:"ms-2",hint:"Closed trades for all selected bots. Click on a trade to go to the trade page for that trade/bot."})])]),default:s(()=>[n(U,{"active-trades":!1,"show-filter":"",trades:e(o).allClosedTradesSelectedBots,"multi-bot-view":""},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),n(i,D(k,{i:e(w).i,x:e(w).x,y:e(w).y,w:e(w).w,h:e(w).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[n(u,{header:"Profit Distribution"},{default:s(()=>[n(M,{trades:e(o).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"]),n(i,D(k,{i:e(C).i,x:e(C).x,y:e(C).y,w:e(C).w,h:e(C).h,"min-w":3,"min-h":4,"drag-allow-from":".drag-header"}),{default:s(()=>[n(u,{header:"Trades Log"},{default:s(()=>[n(W,{trades:e(o).allTradesSelectedBots,"show-title":!1},null,8,["trades"])]),_:1})]),_:2},1040,["i","x","y","w","h"])]),_:1},8,["layout","responsive-layouts","is-resizable","is-draggable"])}}});export{Pe as default};
//# sourceMappingURL=DashboardView-CVKhAcX5.js.map
