{"version":3,"file":"ExchangeSelect.vue_vue_type_script_setup_true_lang-BrgJHb0V.js","sources":["../../src/components/general/BaseStringList.vue","../../src/components/ftbot/ExchangeSelect.vue"],"sourcesContent":["<script setup lang=\"ts\">\nimport type { BaseSize } from 'bootstrap-vue-next';\n\nconst values = defineModel<string[]>({ required: true });\nwithDefaults(\n  defineProps<{\n    placeholder?: string;\n    size?: keyof BaseSize;\n  }>(),\n  {\n    placeholder: '',\n    size: 'sm',\n  },\n);\n</script>\n\n<template>\n  <div class=\"d-flex flex-row gap-2\">\n    <div class=\"d-flex gap-1 flex-column w-100\">\n      <div v-for=\"(val, idx) in values\" :key=\"idx\" class=\"d-flex flex-row gap-1\">\n        <BFormInput v-model=\"values[idx]\" size=\"sm\" :placeholder=\"placeholder\"></BFormInput>\n        <BButton\n          :size=\"size\"\n          variant=\"outline-secondary\"\n          title=\"Delete this value.\"\n          class=\"d-flex align-items-center justify-content-center\"\n          @click=\"values.splice(idx, 1)\"\n        >\n          <i-mdi-delete />\n        </BButton>\n      </div>\n    </div>\n    <BButton\n      :size=\"size\"\n      :title=\"`Add new value`\"\n      variant=\"secondary\"\n      class=\"mt-auto d-flex align-items-center justify-content-center\"\n      @click=\"values.push('')\"\n    >\n      <i-mdi-plus-box-outline />\n    </BButton>\n  </div>\n</template>\n","<script setup lang=\"ts\">\nimport type { ExchangeSelection } from '@/types';\n\nconst exchangeModel = defineModel<ExchangeSelection>({ required: true });\n\nconst botStore = useBotStore();\n\nconst exchangeList = computed(() => {\n  const supported = botStore.activeBot.exchangeList\n    .filter((ex) => ex.valid && ex.supported)\n    .sort((a, b) => a.name.localeCompare(b.name));\n\n  const unsupported = botStore.activeBot.exchangeList\n    .filter((ex) => ex.valid && !ex.supported)\n    .sort((a, b) => a.name.localeCompare(b.name));\n\n  return [\n    {\n      label: 'Supported',\n      options: supported.map((e) => ({ value: e.classname ?? e.name, text: e.name })),\n    },\n    {\n      label: 'Unsupported',\n      options: unsupported.map((e) => ({ value: e.classname ?? e.name, text: e.name })),\n    },\n  ];\n});\n\nconst tradeModesTyped = computed(() => {\n  const val = botStore.activeBot.exchangeList.find(\n    (ex) =>\n      ex.name === exchangeModel.value.exchange || ex.classname === exchangeModel.value.exchange,\n  )?.trade_modes;\n  return val ?? [];\n});\n\nconst tradeModes = computed(() => {\n  return tradeModesTyped.value.map((tm) => {\n    return {\n      text: `${tm.margin_mode} ${tm.trading_mode}`,\n      value: tm,\n    };\n  });\n});\n\nwatch(\n  () => exchangeModel.value.exchange,\n  () => {\n    if (tradeModesTyped.value.length < 2) {\n      exchangeModel.value.trade_mode = tradeModesTyped.value[0];\n    }\n  },\n);\n\nonMounted(() => {\n  if (botStore.activeBot.exchangeList.length === 0) {\n    botStore.activeBot.getExchangeList();\n  }\n});\n</script>\n\n<template>\n  <div class=\"w-100 d-flex\">\n    <BFormSelect\n      id=\"exchange-select\"\n      v-model=\"exchangeModel.exchange\"\n      size=\"sm\"\n      :options=\"exchangeList\"\n    >\n    </BFormSelect>\n    <BFormSelect\n      id=\"tradeMode-select\"\n      v-model=\"exchangeModel.trade_mode\"\n      size=\"sm\"\n      :options=\"tradeModes\"\n      :disabled=\"tradeModes.length < 2\"\n    >\n    </BFormSelect>\n    <BButton class=\"ms-2 no-min-w\" size=\"sm\" @click=\"botStore.activeBot.getExchangeList\">\n      <i-mdi-refresh />\n    </BButton>\n  </div>\n</template>\n"],"names":["values","_useModel","__props","exchangeModel","botStore","useBotStore","exchangeList","computed","supported","ex","a","b","unsupported","tradeModesTyped","_a","tradeModes","tm","watch","onMounted"],"mappings":"sjBAGM,MAAAA,EAASC,EAAqBC,EAAA,YAAmB,mnCCAjD,MAAAC,EAAgBF,gBAAiD,EAEjEG,EAAWC,EAAY,EAEvBC,EAAeC,EAAS,IAAM,CAC5B,MAAAC,EAAYJ,EAAS,UAAU,aAClC,OAAQK,GAAOA,EAAG,OAASA,EAAG,SAAS,EACvC,KAAK,CAACC,EAAGC,IAAMD,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAC,EAExCC,EAAcR,EAAS,UAAU,aACpC,OAAQK,GAAOA,EAAG,OAAS,CAACA,EAAG,SAAS,EACxC,KAAK,CAACC,EAAGC,IAAMD,EAAE,KAAK,cAAcC,EAAE,IAAI,CAAC,EAEvC,MAAA,CACL,CACE,MAAO,YACP,QAASH,EAAU,IAAK,IAAO,CAAE,MAAO,EAAE,WAAa,EAAE,KAAM,KAAM,EAAE,MAAO,CAChF,EACA,CACE,MAAO,cACP,QAASI,EAAY,IAAK,IAAO,CAAE,MAAO,EAAE,WAAa,EAAE,KAAM,KAAM,EAAE,MAAO,CAAA,CAEpF,CAAA,CACD,EAEKC,EAAkBN,EAAS,IAAM,OAKrC,QAJYO,EAAAV,EAAS,UAAU,aAAa,KACzCK,GACCA,EAAG,OAASN,EAAc,MAAM,UAAYM,EAAG,YAAcN,EAAc,MAAM,QAAA,IAFzE,YAAAW,EAGT,cACW,CAAC,CAAA,CAChB,EAEKC,EAAaR,EAAS,IACnBM,EAAgB,MAAM,IAAKG,IACzB,CACL,KAAM,GAAGA,EAAG,WAAW,IAAIA,EAAG,YAAY,GAC1C,MAAOA,CACT,EACD,CACF,EAED,OAAAC,EACE,IAAMd,EAAc,MAAM,SAC1B,IAAM,CACAU,EAAgB,MAAM,OAAS,IACjCV,EAAc,MAAM,WAAaU,EAAgB,MAAM,CAAC,EAC1D,CAEJ,EAEAK,EAAU,IAAM,CACVd,EAAS,UAAU,aAAa,SAAW,GAC7CA,EAAS,UAAU,gBAAgB,CACrC,CACD"}